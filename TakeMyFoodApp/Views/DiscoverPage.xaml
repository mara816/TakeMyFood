<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TakeMyFoodApp.Views.DiscoverPage"
             Title="Discover"
             xmlns:viewmodel="clr-namespace:TakeMyFoodApp.ViewModels"
             xmlns:models="clr-namespace:TakeMyFoodApp.Models"
             x:DataType="viewmodel:DiscoverViewModel">

  <Grid RowDefinitions="50, *, 50"
        ColumnDefinitions="*, Auto"
        Padding="10">

    <RefreshView Command="{Binding LoadProductCommand}"
                 IsRefreshing="{Binding IsBusy}"/>

    <SearchBar Grid.Column="0" 
               Grid.Row="0" 
               Placeholder="Search..."/>

    <CollectionView Grid.Row="1" Grid.ColumnSpan="2"
                    ItemsSource="{Binding Products}">
      <CollectionView.ItemTemplate>
        <DataTemplate x:DataType="models:UiProduct">
          <Grid Padding="10"
                ColumnDefinitions="*, *">

            <Image 
                   Source="{Binding SourceImage}"
                   Grid.Column="0"/>
            <Label Text="{Binding Name}"
                     FontSize="24"
                     Grid.Column="1"/>

          </Grid>
        </DataTemplate>
      </CollectionView.ItemTemplate>
    </CollectionView>

    <Button Grid.Column="2"
            Grid.Row="0"
            Text="Add"
            Command="{Binding AddCommand}"/>
  </Grid>
</ContentPage>